# 要求内容

## 概要

試合設定後に遷移する `/games/[id]` 画面で、一球ごとの投球記録と打席結果をNPB準拠の記号で入力できるスコア入力機能を実装する。

## 背景

PRD「2. スコア入力（一球記録・打席結果）」に対応するMVP機能（P0）。試合設定（実装済み）の次ステップとして、実際の試合記録を行えるようにする。Supabaseは未接続のためローカル状態（Zustand）で管理する。

## 実装対象の機能

### 1. 投球カウント入力

- ボール(B)・空振り(S)・見逃し(S)・ファウル(F)・インプレー・死球 の6種類を入力できる
- 入力のたびにカウント表示（B-S）が更新される
- スリーストライクで自動的に打席結果（三振）として確定
- フォーボールで自動的に打席結果（四球）として確定

### 2. 打席結果入力

- 安打（単打・二塁打・三塁打・本塁打）
- アウト（ゴロ・フライ・ライナー・三振振り・三振見）
- 出塁（四球・死球）
- その他（野選・エラー・併殺打・犠打・犠飛）
- 結果確定で次の打者に自動移行

### 3. アウトカウント・イニング管理

- アウト数の自動更新（結果に応じて0〜3）
- 3アウトで攻守交代ボタンを表示
- イニング表示（例: 1回表 / 1回裏）

### 4. Undo（取り消し）

- 直前の投球入力・打席結果確定を取り消せる
- Undo後は入力前の状態に戻る

### 5. スコアシート表示（簡易版）

- 現在の打者名・打順を表示
- 各打者の打席ログ（テキスト形式）を一覧表示
- 塁上走者の状態表示（一・二・三塁のインジケーター）

## 受け入れ条件

### 投球入力

- [ ] B/S振/S見/F/インプレー/死球の6ボタンが表示される
- [ ] タップ後にカウントが即座に更新される（B: ボール数、S: ストライク数）
- [ ] 3ストライクで打席結果「三振」が自動確定する
- [ ] 4ボールで打席結果「四球」が自動確定する

### 打席結果入力

- [ ] 全14種の打席結果ボタンが選択できる
- [ ] 結果確定後に次の打者に移行する
- [ ] アウト結果でアウトカウントが増加する

### イニング管理

- [ ] 現在のイニング番号と表/裏が表示される
- [ ] 3アウトで「攻守交代」ボタンが表示される
- [ ] 攻守交代で次のイニング・次の先頭打者に移行する

### Undo

- [ ] Undoボタンで直前の操作を取り消せる
- [ ] 打席冒頭（投球なし）でUndoすると前の打席の結果に戻る

### 現在打者表示

- [ ] 現在打席中の打者名・打順番号が表示される
- [ ] 打席のカウント（ボール数・ストライク数・ファウル数）が表示される

## 成功指標

- 1打席の入力（投球〜結果確定）を平均30秒以内で完了できる
- タブレット（768px以上）でのタッチ操作で全ボタンを押せる（最小44px）

## スコープ外

- 走者進塁・盗塁・塁間イベントの詳細記録（次フェーズ）
- 選手交代機能（次フェーズ）
- SVGダイヤモンド走塁経路描画（次フェーズ）
- Supabaseへの保存（次フェーズ）
- 成績集計画面（次フェーズ）

## 参照ドキュメント

- `docs/product-requirements.md` - 機能要件「2. スコア入力」
- `docs/functional-design.md` - データモデル（PlateAppearance, Pitch）・scoreStore設計
- `docs/architecture.md` - Zustand Store設計
